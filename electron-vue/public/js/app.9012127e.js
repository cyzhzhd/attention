(function(e){function t(t){for(var s,i,r=t[0],c=t[1],l=t[2],d=0,m=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],s=!0,i=1;i<o.length;i++){var c=o[i];0!==n[c]&&(s=!1)}s&&(a.splice(t--,1),e=r(r.s=o[0]))}return e}var s={},n={app:0},a=[];function i(e){return r.p+"js/"+({about:"about"}[e]||e)+"."+{about:"14147fcf"}[e]+".js"}function r(t){if(s[t])return s[t].exports;var o=s[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.e=function(e){var t=[],o=n[e];if(0!==o)if(o)t.push(o[2]);else{var s=new Promise((function(t,s){o=n[e]=[t,s]}));t.push(o[2]=s);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=i(e);var l=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(d);var o=n[e];if(0!==o){if(o){var s=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",l.name="ChunkLoadError",l.type=s,l.request=a,o[1](l)}n[e]=void 0}};var d=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},r.m=e,r.c=s,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(o,s,function(t){return e[t]}.bind(null,s));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var u=l;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"0a38":function(e,t,o){"use strict";var s=o("a7cf"),n=o.n(s);n.a},"0a64":function(e,t,o){"use strict";var s=o("ec71"),n=o.n(s);n.a},"0b52":function(e,t,o){},"0bea":function(e,t,o){},1183:function(e,t,o){e.exports=o.p+"img/attention-logo.45b218b4.png"},1423:function(e,t,o){e.exports=o.p+"img/camera-off.c0219945.svg"},"322e":function(e,t,o){},3864:function(e,t,o){},"38c3":function(e,t,o){"use strict";var s=o("f86f"),n=o.n(s);n.a},4071:function(e,t,o){e.exports=o.p+"img/charisse-kenion-ts-E3IVKv8o-unsplash.88af888b.jpg"},4813:function(e,t,o){},"4ac2":function(e,t,o){"use strict";var s=o("aac9"),n=o.n(s);n.a},5226:function(e,t,o){e.exports=o.p+"img/profile.aa11607c.png"},5340:function(e,t,o){e.exports=o.p+"img/mic-on.ae701731.svg"},5507:function(e,t,o){e.exports=o.p+"img/camera-on.d2828f1a.svg"},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var s=o("2b0e"),n=o("bc3a"),a=o.n(n),i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app"},[o("router-view",{staticClass:"router-view"})],1)},r=[],c=(o("5c0b"),o("2877")),l={},d=Object(c["a"])(l,i,r,!1,null,null,null),u=d.exports,m=(o("d3b7"),o("8c4f")),f=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-page"},[o("nav",{staticClass:"login-signup"},[o("ul",{staticClass:"menu"},[o("li",{staticClass:"menu-item",on:{click:function(t){return t.preventDefault(),e.activeLogIn(t)}}},[o("a",{staticClass:"menu-link",attrs:{href:"#"}},[e._v("Log In")])]),o("li",{staticClass:"menu-item",on:{click:function(t){return t.preventDefault(),e.activeSignUp(t)}}},[o("a",{staticClass:"menu-link",attrs:{href:"#"}},[e._v("Sign Up")])])])]),e.hasLogInActivated?o("div",{staticClass:"login-form"},[o("h2",[e._v("Login")]),o("form",{staticClass:"login-form",on:{submit:function(t){return t.preventDefault(),e.LogIn(e.login.email,e.login.password)}}},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.login.email,expression:"login.email",modifiers:{trim:!0}}],staticClass:"login-email",attrs:{type:"email",placeholder:"Enter your email address"},domProps:{value:e.login.email},on:{input:function(t){t.target.composing||e.$set(e.login,"email",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.login.password,expression:"login.password",modifiers:{trim:!0}}],staticClass:"login-password",attrs:{type:"password",placeholder:"password"},domProps:{value:e.login.password},on:{input:function(t){t.target.composing||e.$set(e.login,"password",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),o("button",{attrs:{type:"submit",variant:"primary",disabled:!e.login.email}},[e._v(" Login ")])])]):o("div",{staticClass:"signup-form"},[o("h2",[e._v("Sign Up")]),o("form",{staticClass:"signup-form",on:{submit:function(t){return t.preventDefault(),e.SignUp()}}},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.signup.email,expression:"signup.email",modifiers:{trim:!0}}],staticClass:"signup-email",attrs:{type:"email",placeholder:"Enter your email address"},domProps:{value:e.signup.email},on:{input:function(t){t.target.composing||e.$set(e.signup,"email",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.signup.password,expression:"signup.password",modifiers:{trim:!0}}],staticClass:"signup-password",attrs:{type:"password",placeholder:"password"},domProps:{value:e.signup.password},on:{input:function(t){t.target.composing||e.$set(e.signup,"password",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.signup.displayName,expression:"signup.displayName",modifiers:{trim:!0}}],staticClass:"signup-displayname",attrs:{type:"text",placeholder:"displayname"},domProps:{value:e.signup.displayName},on:{input:function(t){t.target.composing||e.$set(e.signup,"displayName",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),o("button",{attrs:{type:"submit",variant:"primary",disabled:!e.signup.email}},[e._v(" Sign Up ")])])]),o("p",{staticClass:"error-message"},[e._v(e._s(e.errorMessage))])])},p=[],v={name:"loginPage",data:function(){return{login:{email:"",password:""},signup:{email:"",password:"",displayName:""},errorMessage:"",hasLogInActivated:!0}},methods:{LogIn:function(){var e=this,t={email:this.login.email,password:this.login.password};this.$http.post("/api/user/login",t).then((function(t){console.log(t),e.$setJWT(t.data),e.login.email="",e.login.password="",e.$router.push({name:"ClassRoomList"})})).catch((function(t){e.errorMessage="잘못된 아이디 혹은 비밀번호를 입력하셨습니다.",console.log(t)}))},SignUp:function(){var e=this,t={email:this.signup.email,password:this.signup.password,name:this.signup.displayName,isTeacher:1};this.$http.post("/api/user/account",t).then((function(t){console.log(t),e.login.email=e.signup.email,e.signup.email="",e.signup.password="",e.signup.displayName="",e.errorMessage="",e.hasLogInActivated=!0})).catch((function(e){console.log(e)}))},activeLogIn:function(){this.errorMessage="",this.hasLogInActivated=!0},activeSignUp:function(){this.errorMessage="",this.hasLogInActivated=!1}}},h=v,g=(o("38c3"),Object(c["a"])(h,f,p,!1,null,"2fa40eea",null)),C=g.exports,b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("side-navigation-panel"),s("div",{staticClass:"main-panel"},[e._m(0),s("section",{staticClass:"main-panel-contents"},[s("ul",{staticClass:"main-panel-classroom-list"},[s("router-link",{staticClass:"create-classroom-title",attrs:{to:{name:"AddClassRoom"},action:""}},[s("div",{staticClass:"create-classroom-card"},[s("div",{staticClass:"create-classroom-plus-icon"},[s("img",{attrs:{src:o("6bc2")}})]),e._v(" 교실 만들기 ")])]),e._l(e.classRooms,(function(t){return s("li",{key:t._id,staticClass:"classroom-card"},[s("div",{staticClass:"classroom-card-header"},[s("router-link",{staticClass:"classroom-card-title",attrs:{to:{name:"ClassRoom",params:{classroomId:t._id,classroomName:t.name}},action:""}},[e._v(" "+e._s(t.name)+" "),s("img",{staticClass:"classroom-card-background",attrs:{src:o("4071")}})]),s("div",{staticClass:"classroom-card-more-button",on:{click:[function(o){return o.preventDefault(),e.$refs.menu.open(o,{classroomId:t._id,classroomName:t.name,host:t.teacherName})},function(e){e.stopPropagation()}]}},[s("img",{attrs:{src:o("878b")}})])],1)])}))],2)])]),s("vue-context",{ref:"menu",scopedSlots:e._u([{key:"default",fn:function(t){return[s("li",[s("a",{on:{click:function(o){return o.preventDefault(),e.manageClassRoom(t.data)}}},[e._v("팀 관리")])]),s("li",[s("a",{on:{click:function(o){return o.preventDefault(),e.leaveTeam(t.data)}}},[e._v("팀 나가기")])]),s("li",[s("a",{on:{click:function(o){return o.preventDefault(),e.deleteClassRoom(t.data)}}},[e._v("팀 삭제")])])]}}])}),s("handoverModal",{attrs:{showModal:e.modalList.handOverModal,classRoomId:e.classRoomId},on:{closemodal:function(t){return e.controlModal("handOverModal")}}}),s("div",{staticClass:"modal-wrapper",on:{click:function(t){return e.controlModal("confirmModal")}}},[e.modalList.confirmModal?s("small-modal",{on:{close:e.modalList.confirmModal}},[s("h3",{attrs:{slot:"header"},slot:"header"},[e._v("방을 삭제하려면 '확인'을 입력해주세요")]),s("h4",{attrs:{slot:"body"},slot:"body"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.confirm(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.textConfirm,expression:"textConfirm",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"확인"},domProps:{value:e.textConfirm},on:{input:function(t){t.target.composing||(e.textConfirm=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("button",{attrs:{type:"submit",variant:"primary",disabled:!e.confirm}},[e._v(" 확인 ")])])]),s("h6",{attrs:{slot:"footer"},slot:"footer"},[e._v(" 이 행동은 되돌릴 수 없습니다. "),s("i",{staticClass:"fa fa-times closeModalBtn fa-2x",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.controlModal("confirmModal")}}})])]):e._e()],1),s("createClassRoomModal",{attrs:{showingModal:e.modalList.addClassRoomModal},on:{closeModal:e.controlModal}})],1)},w=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"main-panel-header"},[s("div",{staticClass:"main-panel-header-title"},[e._v("교실 목록")]),s("div",{staticClass:"main-panel-header-icon"},[s("img",{attrs:{src:o("96a8")}})])])}],_=(o("4160"),o("159b"),o("96cf"),o("1da1")),M=o("899b"),A=(o("f89b"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"side-navigation-panel"},[e._m(0),o("div",{staticClass:"side-navigation-body"},[o("router-link",{staticClass:"side-navigation-item",attrs:{to:"/"}},[e._v("홈")]),o("div",{staticClass:"side-navigation-item"},[e._v("교실 목록")]),o("div",{staticClass:"side-navigation-item"},[e._v("수업 목록")])],1),e._m(1)])}),I=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"side-navigation-header"},[s("img",{attrs:{src:o("1183")}})])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"side-navigation-footer"},[o("div",{staticClass:"current-user-profile"}),o("div",{staticClass:"current-user-name"},[e._v("이지은 선생님")])])}],y={},k=y,x=(o("ab89"),Object(c["a"])(k,A,I,!1,null,"f5291406",null)),R=x.exports,S=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modal"},[o("div",{staticClass:"modal-wrapper",on:{click:e.closeModal}},[e.showModal?o("mediumModal",{on:{close:e.showModal}},[o("h3",{attrs:{slot:"header"},on:{click:e.showUserList},slot:"header"},[e._v(" 유저 목록 보기 "),o("i",{staticClass:"fa fa-users",attrs:{"aria-hidden":"true"}})]),o("h4",{attrs:{slot:"body"},slot:"body"},e._l(e.userlist,(function(t){return o("li",{key:t.uid},[1===e.userlist.length?o("div",[e._v(" 팀에 혼자 남아 있습니다. 팀을 나가려면 팀 삭제를 눌러주세요. ")]):o("div",[t.uid!==e.$user.uid?o("a",{on:{click:function(o){return e.chooseUser(t)}}},[e._v(e._s(t.userName))]):e._e()])])})),0),o("h6",{attrs:{slot:"footer"},slot:"footer"},[e._v(" 팀을 나가려면 다른 유저에게 팀장을 양도해주세요. "),o("i",{staticClass:"fa fa-times closeModalBtn fa-2x",attrs:{"aria-hidden":"true"},on:{click:e.closeModal}})])]):e._e()],1),o("div",{staticClass:"modal-wrapper",on:{click:e.closeModal}},[e.showingConfirmModal?o("smallModal",{on:{close:e.showingConfirmModal}},[o("h3",{attrs:{slot:"header"},slot:"header"},[e._v(" 팀장을 양도하려면 '확인'을 입력해주세요 ")]),o("h4",{attrs:{slot:"body"},slot:"body"},[o("form",{on:{submit:function(t){return t.preventDefault(),e.confirm(t)}}},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.textConfirm,expression:"textConfirm",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"확인"},domProps:{value:e.textConfirm},on:{input:function(t){t.target.composing||(e.textConfirm=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),o("button",{attrs:{type:"submit",variant:"primary",disabled:!e.confirm}},[e._v(" 확인 ")])])]),o("h6",{attrs:{slot:"footer"},slot:"footer"},[e._v(" 이 행동은 되돌릴 수 없습니다. "),o("i",{staticClass:"fa fa-times closeModalBtn fa-2x",attrs:{"aria-hidden":"true"},on:{click:e.closeConfirmModal}})])]):e._e()],1)])},O=[],$=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("transition",{attrs:{name:"modal"}},[o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-container",on:{click:function(e){e.stopPropagation()}}},[o("div",{staticClass:"modal-header"},[e._t("header",[e._v(" default header ")])],2),o("div",{staticClass:"modal-body"},[e._t("body",[e._v(" default body ")])],2),o("div",{staticClass:"modal-footer"},[e._t("footer",[e._v("default footer")])],2)])])])])},T=[],E={},j=E,U=(o("4ac2"),Object(c["a"])(j,$,T,!1,null,"2884d030",null)),N=U.exports,L=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("transition",{attrs:{name:"modal"}},[o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-container",on:{click:function(e){e.stopPropagation()}}},[o("div",{staticClass:"modal-header"},[e._t("header",[e._v(" default header ")])],2),o("div",{staticClass:"modal-body"},[e._t("body",[e._v(" default body ")])],2),o("div",{staticClass:"modal-footer"},[e._t("footer",[e._v("default footer")])],2)])])])])},D=[],V={},B=V,P=(o("ecd0"),Object(c["a"])(B,L,D,!1,null,"58ef65ee",null)),F=P.exports,W={components:{mediumModal:N,smallModal:F},props:["showModal","roomId"],data:function(){return{userlist:[],chosenUser:"",textConfirm:"",showingConfirmModal:!1}},methods:{closeModal:function(){this.$emit("closemodal"),this.userlist=[],this.showingConfirmModal=!1,this.textConfirm=""},closeConfirmModal:function(){this.showingConfirmModal=!1,this.textConfirm=""},chooseUser:function(e){this.chosenUser=e,this.showingConfirmModal=!this.showingConfirmModal},confirm:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("확인"!==e.textConfirm){t.next=8;break}return e.$emit("closemodal"),e.closeConfirmModal(),t.next=5,e.leaveTeam();case 5:e.delegateHost(),t.next=9;break;case 8:console.log("try it again");case 9:case"end":return t.stop()}}),t)})))()},delegateHost:function(){var e={roomId:this.roomId,uid:this.chosenUser.uid,userName:this.chosenUser.userName};this.$http.post("api/firebase/delegateHost",e)},leaveTeam:function(){var e={roomId:this.roomId,uid:this.$user.uid};this.$http.post("/api/firebase/leaveTeam",e)},showUserList:function(){var e=this;this.$firebase.database().ref("/rooms/".concat(this.roomId,"/userlist")).on("value",(function(t){e.userlist=[],t.forEach((function(t){var o=t.val();e.userlist.push(o)}))}))}}},H=W,J=Object(c["a"])(H,S,O,!1,null,null,null),Z=J.exports,z=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modal-wrapper",on:{click:e.closeModal}},[e.showingModal?o("medium-input-modal",{on:{close:e.showingModal}},[o("div",{attrs:{slot:"header"},slot:"header"},[e._v("교실 만들기")]),o("div",{attrs:{slot:"input1"},slot:"input1"},[e._v("학년 "),o("input",{staticClass:"input",attrs:{type:"text"}})]),o("div",{attrs:{slot:"input2"},slot:"input2"},[e._v("반 "),o("input",{staticClass:"input",attrs:{type:"text"}})]),o("div",{attrs:{slot:"input3"},slot:"input3"},[e._v("담임 "),o("input",{staticClass:"input",attrs:{type:"text"}})]),o("div",{attrs:{slot:"input4"},slot:"input4"})]):e._e()],1)},G=[],Q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"modal"}},[s("div",{staticClass:"modal-mask"},[s("div",{staticClass:"modal-wrapper"},[s("div",{staticClass:"modal-container enter-modal-wrapper",on:{click:function(e){e.stopPropagation()}}},[s("img",{staticClass:"close-button",attrs:{src:o("a373"),alt:""}}),s("div",{staticClass:"add-header-wrapper"},[e._t("header",[e._v(" default header ")])],2),s("div",{staticClass:"contents"},[s("div",{staticClass:"input-wrapper"},[e._t("input1",[e._v(" input 1 ")])],2),s("div",{staticClass:"input-wrapper"},[e._t("input2",[e._v(" input 2 ")])],2),s("div",{staticClass:"input-wrapper"},[e._t("input3",[e._v(" input 3 ")])],2),s("div",{staticClass:"input-wrapper"},[e._t("input4",[e._v(" input 4 ")])],2)]),e._t("footer",[s("div",{staticClass:"enter-button",attrs:{role:"button"}},[e._v("입장하러 가기")])])],2)])])])},Y=[],K={},q=K,X=(o("6158"),Object(c["a"])(q,Q,Y,!1,null,"0fe25360",null)),ee=X.exports,te={name:"CreateClassRoomModal",props:["showingModal"],components:{mediumInputModal:ee},methods:{closeModal:function(){this.$emit("closeModal","addClassRoomModal")}}},oe=te,se=Object(c["a"])(oe,z,G,!1,null,null,null),ne=se.exports,ae={name:"roomList",components:{VueContext:M["a"],handoverModal:Z,smallModal:F,createClassRoomModal:ne,SideNavigationPanel:R},data:function(){return{modalList:{handOverModal:!1,confirmModal:!1,addClassRoomModal:!1},classRooms:[],classRoomId:"",textConfirm:""}},methods:{manageClassRoom:function(e){this.$router.push({name:"ClassRoomSettings",params:{classRoomId:e.classroomId,roomName:e.classroomName}})},deleteClassRoom:function(e){this.modalList.confirmModal=!0,this.classRoomId=e.classroomId},confirm:function(){if("확인"===this.textConfirm){this.controlModal("confirmModal");var e={headers:{Authorization:"Bearer ".concat(this.$jwt)},params:{id:this.classRoomId}};console.log(this.classRoomId),this.$http.delete("/api/class",e),this.getClassRoomList()}},controlModal:function(e){this.modalList[e]=!this.modalList[e],this.modalList[e]&&"confirmModal"===e&&(this.modalList[e]=!1,this.textConfirm="")},getClassRoomList:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var o,s,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("jwt = ",e.$jwt),o={headers:{Authorization:"Bearer ".concat(e.$jwt)}},t.next=4,e.$http.get("/api/user",o);case 4:s=t.sent,n=s.data._id,e.$setUserId(n),a=s.data.ownClasses,e.classRooms=[],a.forEach(function(){var t=Object(_["a"])(regeneratorRuntime.mark((function t(s){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o.params={class:s},t.next=3,e.$http.get("/api/class",o);case 3:n=t.sent,e.classRooms.push(n.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),console.log("room = ",e.classRooms);case 11:case"end":return t.stop()}}),t)})))()}},created:function(){this.getClassRoomList()}},ie=ae,re=(o("806c"),Object(c["a"])(ie,b,w,!1,null,"5bbd6d35",null)),ce=re.exports,le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("side-navigation-panel"),s("div",{staticClass:"main-panel"},[e._m(0),s("div",{staticClass:"main-panel-contents"},[s("div",{staticClass:"main-panel-class-list"},[s("router-link",{attrs:{to:{name:"AddClass"},action:""}},[s("div",{staticClass:"create-class-item"},[s("div",{staticClass:"create-classroom-plus-icon"},[s("img",{attrs:{src:o("6bc2")}})]),s("div",{staticClass:"create-classroom-title"},[e._v("수업 만들기")])])]),e._m(1),s("div",{staticClass:"class-item"},[e._m(2),s("router-link",{staticClass:"classroom-card-title",attrs:{to:{name:"Class",params:{classroomId:e.classroomId,classId:e.classId}},action:""}},[s("img",{staticClass:"class-item-preview",attrs:{src:o("cf42")}})]),s("div",{staticClass:"class-item-class-start-button",attrs:{role:"button"}},[e._v(" 강의 시작 ")])],1)],1)])])],1)},de=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("header",{staticClass:"main-panel-header"},[o("div",{staticClass:"main-panel-header-title"},[e._v("수업 목록")]),o("div",{staticClass:"main-panel-header-class-name"},[e._v("2학년 1반")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"class-list-header"},[o("div",{staticClass:"class-list-header-item"},[e._v("수업시간")]),o("div",{staticClass:"class-list-header-item"},[e._v("과목")]),o("div",{staticClass:"class-list-header-item"},[e._v("선생님")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"class-item-header"},[o("div",{staticClass:"class-item-teacher-profile"}),o("div",{staticClass:"class-item-header-item"},[e._v("9:00")]),o("div",{staticClass:"class-item-header-item"},[e._v("국어")]),o("div",{staticClass:"class-item-header-item-teacher-name"},[e._v(" 이지은 선생님 ")])])}],ue={components:{SideNavigationPanel:R},data:function(){return{classroomId:this.$route.params.classroomId,classRoomName:this.$route.params.classRoomName,classId:"asdasd"}},methods:{}},me=ue,fe=(o("94ac"),Object(c["a"])(me,le,de,!1,null,"08a428c4",null)),pe=fe.exports,ve=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[e._m(0),o("web-rtc",{staticClass:"webRTC"}),o("user-list",{staticClass:"user-list"}),o("room-options",{staticClass:"room-options"})],1)},he=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"goal"},[o("p",[e._v("2주차 관동별곡")])])}],ge=o("5530"),Ce=o("2f62"),be=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"videos",staticClass:"videos"},[o("div",[o("video",{ref:"localVideo",staticClass:"localVideo",attrs:{autoplay:"",muted:"",playsinline:""},domProps:{muted:!0}}),o("p",[e._v("Me")])])])},we=[],_e={name:"WebRTC",methods:Object(ge["a"])({},Object(Ce["b"])("webRTC",["SetUser","VideoSetter"])),mounted:function(){this.SetUser(this.$userId);var e={localVideo:this.$refs.localVideo,videos:this.$refs.videos};this.VideoSetter(e)}},Me=_e,Ae=(o("b79a"),Object(c["a"])(Me,be,we,!1,null,null,null)),Ie=Ae.exports,ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"userlist-vue"},[s("div",{staticClass:"online-total"},[s("p",{staticClass:"button",on:{click:function(t){return t.preventDefault(),e.activeTotalUserList(t)}}},[s("a",{attrs:{href:"#"}},[e._v("all")])]),s("p",{staticClass:"button",on:{click:function(t){return t.preventDefault(),e.activeOnlineUserList(t)}}},[s("a",{attrs:{href:"#"}},[e._v("online")])])]),s("div",{staticClass:"userlist"},[e.hasOnlineActive?s("ul",e._l(e.logInUser,(function(t){return s("li",{key:t.uid,staticClass:"userlist-onlie"},[s("div",{on:{click:[function(o){return o.preventDefault(),e.$refs.menu.open(o,t)},function(e){e.stopPropagation()}]}},[s("figure",{staticClass:"userlist-profile",style:{backgroundImage:"url("+o("5226")+")"}}),e._v(" "+e._s(t.displayName)+" ")])])})),0):s("ul",e._l(e.totalUser,(function(t){return s("li",{key:t.uid,staticClass:"userlist-total"},[e._v(" "+e._s(t.userName)+" ")])})),0)]),s("vue-context",{ref:"menu",scopedSlots:e._u([{key:"default",fn:function(t){return[s("li",[s("a",{on:{click:function(o){return o.preventDefault(),e.connect(t.data)}}},[e._v("연결 하기")])]),s("li",[s("a",{on:{click:function(o){return o.preventDefault(),e.disconnect(t.data)}}},[e._v("연결 해제 하기")])])]}}])})],1)},ke=[],xe={name:"userlist",components:{VueContext:M["a"]},data:function(){return{roomId:this.$route.params.roomId,logInUser:[],totalUser:[],hasOnlineActive:!0}},methods:Object(ge["a"])({connect:function(e){console.log("connect with ",e),this.ConnectWithTheUser(e)},disconnect:function(e){console.log("disconnect with ",e),this.DisconnectWithTheUser(e)},activeOnlineUserList:function(){this.hasOnlineActive=!0},activeTotalUserList:function(){this.hasOnlineActive=!1}},Object(Ce["b"])("webRTC",["ConnectWithTheUser","DisconnectWithTheUser"])),created:function(){}},Re=xe,Se=(o("7257"),Object(c["a"])(Re,ye,ke,!1,null,null,null)),Oe=Se.exports,$e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"options-vue"},[s("div",{staticClass:"option-bar"},[s("div",{staticClass:"options"},[s("div",{staticClass:"option",on:{click:function(t){return t.preventDefault(),e.controlModal("showingScreenSharingModal")}}},[e._v(" 화면공유 ")]),s("div",{ref:"temp",staticClass:"option"},[e._v("임시버튼")]),s("div",{staticClass:"option",on:{click:function(t){return t.preventDefault(),e.controlModal("showingChatModal")}}},[e._v(" 채팅 ")]),s("div",{staticClass:"option",on:{click:function(t){return t.preventDefault(),e.controlModal("showingInviteModal")}}},[e._v(" 초대 ")]),s("div",{staticClass:"option",on:{click:function(t){return t.preventDefault(),e.controlModal("showingSettingModal")}}},[e._v(" 설정 ")]),s("div",{staticClass:"camdio"},[s("div",{on:{click:function(t){return t.preventDefault(),e.muteVideo(t)}}},[e.isVideoMuted?e._e():s("img",{attrs:{src:o("5507")}}),e.isVideoMuted?s("img",{attrs:{src:o("1423")}}):e._e()]),s("div",{on:{click:function(t){return t.preventDefault(),e.muteAudio(t)}}},[e.isAudioMuted?e._e():s("img",{attrs:{src:o("5340")}}),e.isAudioMuted?s("img",{attrs:{src:o("df4f")}}):e._e()])])]),s("div",{staticClass:"back"},[s("div",{on:{click:function(e){e.preventDefault()}}},[s("a",{on:{click:e.leaveRoom}},[e._v("수업종료")])])])]),s("div",{staticClass:"modal-wrapper",on:{click:function(t){return e.controlModal("showingInviteModal")}}},[e.modalList.showingInviteModal?s("smallModal",{on:{close:e.modalList.showingInviteModal}},[s("h3",{attrs:{slot:"header"},slot:"header"},[e._v("Copy this roomId and give it to your student")]),s("h4",{attrs:{slot:"body"},slot:"body"},[e._v(e._s(this.$route.params.roomId))]),s("h4",{attrs:{slot:"footer"},slot:"footer"},[s("i",{staticClass:"fa fa-times closeModalBtn fa-2x",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.controlModal("showingInviteModal")}}})])]):e._e()],1),s("settings",{attrs:{showingModal:e.modalList.showingSettingModal},on:{closeModal:e.controlModal}}),s("screen-sharing",{attrs:{showingModal:e.modalList.showingScreenSharingModal},on:{closeModal:e.controlModal}})],1)},Te=[],Ee=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modal-wrapper",on:{click:e.closeModal}},[e.showingModal?o("largeModal",{on:{close:e.showingModal}},[o("h3",{attrs:{slot:"header"},slot:"header"},[e._v("설정")]),o("h4",{attrs:{slot:"body"},slot:"body"},[o("video",{ref:"videoSettings",attrs:{width:"480",height:"360",autoplay:"",playsinline:"",muted:""},domProps:{muted:!0}}),o("div",{staticClass:"options"},[o("button",{ref:"temp"},[o("h2",[e._v("버튼")])])])]),o("h4",{attrs:{slot:"footer"},slot:"footer"},[o("i",{staticClass:"fa fa-times closeModalBtn fa-2x",attrs:{"aria-hidden":"true"},on:{click:e.closeModal}})])]):e._e()],1)},je=[],Ue=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("transition",{attrs:{name:"modal"}},[o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-container",on:{click:function(e){e.stopPropagation()}}},[o("div",{staticClass:"modal-header"},[e._t("header",[e._v(" default header ")])],2),o("div",{staticClass:"modal-body"},[e._t("body",[e._v(" default body ")])],2),o("div",{staticClass:"modal-footer"},[e._t("footer",[e._v("default footer")])],2)])])])])},Ne=[],Le={},De=Le,Ve=(o("bb36"),Object(c["a"])(De,Ue,Ne,!1,null,"5680f3b8",null)),Be=Ve.exports,Pe=new s["a"],Fe={name:"main-settings",props:["showingModal"],components:{largeModal:Be},computed:Object(ge["a"])({},Object(Ce["c"])("webRTC",["storedLocalVideo"])),methods:Object(ge["a"])({closeModal:function(){this.$emit("closeModal","showingSettingModal")}},Object(Ce["b"])("webRTC",["ButtonSetter2"])),mounted:function(){var e=this;Pe.$on("videoSetting",(function(){e.$nextTick((function(){e.$refs.videoSettings.srcObject=e.storedLocalVideo.srcObject,e.ButtonSetter2(e.$refs.temp)}))}))},beforeDestroy:function(){Pe.$off("videoSetting")}},We=Fe,He=Object(c["a"])(We,Ee,je,!1,null,null,null),Je=He.exports,Ze=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modal-wrapper",on:{click:e.closeModal}},[e.showingModal?o("largeModal",{on:{close:e.showingModal}},[o("h3",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[o("div",{staticClass:"modal-title"},[e._v("화면 공유")]),o("div",{staticClass:"closeModalBtn"},[o("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"},on:{click:e.closeModal}})])]),o("h4",{staticClass:"body",attrs:{slot:"body"},slot:"body"},[o("div",{ref:"screenNames",attrs:{id:"screenNames"}}),o("div",{ref:"screenInfo",attrs:{id:"screenInfo"}}),o("div",{ref:"thumbnail",staticClass:"thumbnail"}),o("div",{ref:"screenVideos",attrs:{id:"screenVideos"}})]),o("h4",{attrs:{slot:"footer"},slot:"footer"},[o("button",{staticClass:"share-button"},[e._v("공유하기")])])]):e._e()],1)},ze=[],Ge={name:"screen-sharing",props:["showingModal"],components:{largeModal:Be},methods:Object(ge["a"])({closeModal:function(){this.$emit("closeModal","showingScreenSharingModal")}},Object(Ce["b"])("electron",["VariableSetter","CaptureScreens"])),mounted:function(){var e=this;Pe.$on("screenSharing",(function(){e.$nextTick((function(){var t={screenNames:e.$refs.screenNames,screenInfo:e.$refs.screenInfo,canvas:e.$refs.thumbnail,screenVideos:e.$refs.screenVideos,captureScreens:e.$refs.captureScreens};e.VariableSetter(t),e.CaptureScreens()}))}))},beforeDestroy:function(){Pe.$off("screenSharing")}},Qe=Ge,Ye=(o("0a64"),Object(c["a"])(Qe,Ze,ze,!1,null,null,null)),Ke=Ye.exports,qe={name:"room-options",components:{smallModal:F,settings:Je,screenSharing:Ke},data:function(){return{roomId:this.$route.params.roomId,roomName:this.$route.params.roomName,modalList:{showingInviteModal:!1,showingSettingModal:!1,showingChatModal:!1,showingScreenSharingModal:!1},isVideoMuted:!0,isAudioMuted:!0}},computed:Object(ge["a"])({},Object(Ce["c"])("webRTC",["storedLocalVideo"])),methods:Object(ge["a"])({controlModal:function(e){this.modalList[e]=!this.modalList[e],this.modalList[e]&&"showingSettingModal"===e?Pe.$emit("videoSetting"):this.modalList[e]&&"showingScreenSharingModal"===e&&Pe.$emit("screenSharing")},muteVideo:function(){this.isVideoMuted=!this.isVideoMuted,this.MuteVideo()},muteAudio:function(){this.isAudioMuted=!this.isAudioMuted,this.MuteAudio()},leaveRoom:function(){this.$router.go(-1),this.LeaveRoom()}},Object(Ce["b"])("webRTC",["MuteVideo","MuteAudio","ShareScreen","LeaveRoom","ButtonSetter1"])),mounted:function(){this.ButtonSetter1(this.$refs.temp)}},Xe=qe,et=(o("0a38"),Object(c["a"])(Xe,$e,Te,!1,null,"60ac7f06",null)),tt=et.exports,ot={name:"room",components:{WebRtc:Ie,userList:Oe,roomOptions:tt},data:function(){return{classroomId:this.$route.params.classroomId,classId:this.$route.params.classId}},methods:Object(ge["a"])({enterRoom:function(){console.log("vue에서 roomId",this.roomId),this.EnterRoom({classroomId:this.classroomId,classId:this.classId,jwt:this.$jwt})}},Object(Ce["b"])("webRTC",["EnterRoom"])),mounted:function(){this.enterRoom()}},st=ot,nt=(o("8de1"),Object(c["a"])(st,ve,he,!1,null,null,null)),at=nt.exports,it=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h2",[e._v(" Add Room "),o("a",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("(back)")])]),o("form",{on:{submit:function(t){return t.preventDefault(),e.createRoom(t)}}},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.roomName,expression:"roomName",modifiers:{trim:!0}}],attrs:{placeholder:"Enter Room Name"},domProps:{value:e.roomName},on:{input:function(t){t.target.composing||(e.roomName=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.tags,expression:"tags",modifiers:{trim:!0}}],attrs:{placeholder:"Enter tags"},domProps:{value:e.tags},on:{input:function(t){t.target.composing||(e.tags=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.classType,expression:"classType",modifiers:{trim:!0}}],attrs:{placeholder:"choose class type"},domProps:{value:e.classType},on:{input:function(t){t.target.composing||(e.classType=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),o("button",{attrs:{type:"submit",variant:"primary",disabled:!e.roomName}},[e._v(" Create Room ")])]),o("form",{on:{submit:function(t){return t.preventDefault(),e.addFavRoom(t)}}},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.roomCodeAdd,expression:"roomCodeAdd",modifiers:{trim:!0}}],attrs:{placeholder:"Enter Room code"},domProps:{value:e.roomCodeAdd},on:{input:function(t){t.target.composing||(e.roomCodeAdd=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),o("button",{attrs:{type:"submit",variant:"primary",disabled:!e.roomCodeAdd}},[e._v(" Add Room ")])])])},rt=[],ct={name:"AddBoard",data:function(){return{tags:"",roomName:"",classType:"",roomCodeAdd:""}},methods:{createRoom:function(){var e={name:this.roomName,tags:this.tags,classType:this.classType},t={headers:{Authorization:"Bearer ".concat(this.$jwt)}};this.$http.post("/api/class",e,t),this.$router.go(-1)},addFavRoom:function(){var e={uid:this.$user.uid,userName:this.$user.displayName,roomId:this.roomCodeAdd};this.$http.post("/api/firebase/addFavRoom",e),this.$router.go(-1)}}},lt=ct,dt=Object(c["a"])(lt,it,rt,!1,null,null,null),ut=dt.exports,mt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h2",[e._v(" Add Class "),o("a",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("(back)")])]),o("form",{on:{submit:function(t){return t.preventDefault(),e.createSession(t)}}},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.sessionName,expression:"sessionName",modifiers:{trim:!0}}],attrs:{placeholder:"Enter session Name"},domProps:{value:e.sessionName},on:{input:function(t){t.target.composing||(e.sessionName=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:e.startTime,expression:"startTime"}],attrs:{type:"datetime-local"},domProps:{value:e.startTime},on:{input:function(t){t.target.composing||(e.startTime=t.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:e.endTime,expression:"endTime"}],attrs:{type:"datetime-local"},domProps:{value:e.endTime},on:{input:function(t){t.target.composing||(e.endTime=t.target.value)}}}),o("button",{attrs:{type:"submit",variant:"primary",disabled:!e.sessionName}},[e._v(" Create Session ")])])])},ft=[],pt={name:"AddBoard",data:function(){return{sessionName:"",startTime:"",endTime:""}},methods:{createSession:function(){var e={name:this.sessionName,startTime:"".concat(this.startTime,":00+09:00"),endTime:"".concat(this.endTime,":00+09:00")};console.log(e)}}},vt=pt,ht=Object(c["a"])(vt,mt,ft,!1,null,null,null),gt=ht.exports,Ct=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",{on:{click:function(t){return e.$router.go(-1)}}},[o("i",{staticClass:"fa fa-long-arrow-left fa-2x",attrs:{"aria-hidden":"true"}})]),e._v(" "+e._s(e.roomName)+", "+e._s(e.roomId)+" ")])},bt=[],wt={name:"TeamSettings",data:function(){return{roomId:this.$route.params.roomId,roomName:this.$route.params.roomName}}},_t=wt,Mt=Object(c["a"])(_t,Ct,bt,!1,null,null,null),At=Mt.exports;s["a"].use(m["a"]);var It=[{path:"/",name:"Login",component:C},{path:"/classroomList",name:"ClassRoomList",component:ce},{path:"/classroom/:classroomId/:classroomName",name:"ClassRoom",component:pe},{path:"/classroom/:classroomId/:classId",name:"Class",component:at},{path:"/add-classroom",name:"AddClassRoom",component:ut},{path:"/add-class",name:"AddClass",component:gt},{path:"/classroom-settings/:classroomId/:classroomName",name:"ClassRoomSettings",component:At},{path:"/about",name:"About",component:function(){return o.e("about").then(o.bind(null,"f820"))}}],yt=new m["a"]({mode:"history",base:"/",routes:It}),kt=yt,xt={email:""},Rt={storedNickName:function(e){return e.email}},St={logIn:function(e,t,o){e.email=t+o,kt.push({name:"RoomList",params:{nickname:t}})},signUp:function(e,t,o){console.log("signup method"),console.log(e,t,o);var s={email:e,password:t,displayName:o};a.a.post("/api/firebase/signup",s)}},Ot={LogIn:function(e,t,o){var s=e.commit;s("logIn",t,o)},SignUp:function(e,t,o,s){var n=e.commit;console.log("actions",t,o,s),n("signUp",t,o,s)}},$t={namespaced:!0,state:xt,getters:Rt,mutations:St,actions:Ot},Tt=(o("99af"),o("a623"),o("4de4"),o("caad"),o("d81d"),o("45fc"),o("b64b"),o("25f0"),o("2532"),o("b85c")),Et={qvgaConstraints:{width:{exact:320},height:{exact:240}},startConstraints:{width:{exact:480},height:{exact:360}},vgaConstraints:{width:{exact:640},height:{exact:480}},hdConstraints:{width:{exact:1280},height:{exact:720}},fullHdConstraints:{width:{exact:1920},height:{exact:1080}},fourKConstraints:{width:{exact:4096},height:{exact:2160}}},jt={video:void 0};function Ut(e){jt.video=e,console.log(jt.video)}var Nt={getVideoSrc:Ut},Lt=io("backendLB-d5c9491c188b429e.elb.ap-northeast-2.amazonaws.com:3000",{autoConnect:!0}).connect();function Dt(e){return{video:e,audio:{echoCancellation:!0}}}var Vt,Bt,Pt,Ft,Wt={iceServers:[{urls:"turn:swm183.com:3478",username:"newteam183",credential:"12345"}],iceCandidatePoolSize:10},Ht=!1,Jt=!1,Zt="START",zt=[],Gt=[],Qt={},Yt=null,Kt={},qt=!1,Xt=!0,eo=!0,to={classroomId:"",classId:"",jwt:"",localVideo:"",tempButton1:"",tempButton2:"",videos:"",myId:"",userOnline:[]},oo={storedRoom:function(e){return e.classroomId},storedLocalVideo:function(e){return e.localVideo}},so={setUser:function(e,t){e.myId=t},enterRoom:function(e,t){Nt.getVideoSrc(e.localVideo),e.classroomId=t.classroomId,e.classId=t.classId,e.jwt=t.jwt;var o={token:e.jwt,class:e.classroomId,session:e.classId};Lt.emit("joinSession",o),console.log("enter room payload",t)},leaveRoom:function(e){var t={token:e.jwt,class:e.classroomId,session:e.classId};Lt.emit("leaveSession",t),console.log("".concat(t,"을 떠남")),yo()},connectWithTheUser:function(e,t){"connected"===zt[t.sessionId].connectionState?alert("you are already connected with ".concat(t.displayName)):po(t.sessionId,!0)},disconnectWithTheUser:function(e,t){"connected"===zt[t.sessionId].connectionState&&(zt[t.sessionId].close(),Mo(t.sessionId),Lt.emit("disconnectRequest",Pt.sessionId,t.sessionId),po(t.sessionId))},videoSetter:function(e,t){e.videos=t.videos,e.localVideo=t.localVideo},buttonSetter1:function(e,t){e.tempButton1=t,e.tempButton1.addEventListener("click",(function(){console.log("button clicked!")}))},buttonSetter2:function(e,t){e.tempButton2=t,e.tempButton2.addEventListener("click",(function(){console.log("button clicked2!")}))}},no={SetUser:function(e,t){var o=e.commit;o("setUser",t)},EnterRoom:function(e,t){return Object(_["a"])(regeneratorRuntime.mark((function o(){var s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return s=e.commit,o.prev=1,console.log(Dt(Et.qvgaConstraints)),o.next=5,navigator.mediaDevices.getUserMedia(Dt(Et.startConstraints));case 5:Vt=o.sent,to.localVideo.srcObject=Vt,Vt.getTracks()[0].enabled=!1,Vt.getTracks()[1].enabled=!1,o.next=14;break;case 11:o.prev=11,o.t0=o["catch"](1),console.log("navigator.getUserMedia error: ",o.t0);case 14:s("enterRoom",t);case 15:case"end":return o.stop()}}),o,null,[[1,11]])})))()},LeaveRoom:function(e){var t=e.commit;t("leaveRoom")},ShareScreen:function(){return Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getDisplayMedia({cursor:!0});case 2:t=e.sent,Yt=t.getTracks(),_o(Yt[0]),Lt.emit("screenSharing",to.classroomId,Bt);case 6:case"end":return e.stop()}}),e)})))()},ConnectWithTheUser:function(e,t){var o=e.commit;console.log("ConnectWithTheUser - userInfo = ",t),o("connectWithTheUser",t)},DisconnectWithTheUser:function(e,t){var o=e.commit;console.log("ConnectWithTheUser - userInfo = ",t),o("disconnectWithTheUser",t)},ButtonSetter1:function(e,t){var o=e.commit;o("buttonSetter1",t)},ButtonSetter2:function(e,t){var o=e.commit;o("buttonSetter2",t)},VideoSetter:function(e,t){var o=e.commit;o("videoSetter",t)},MuteVideo:function(){Ao()},MuteAudio:function(){Io()}};function ao(e){Lt.emit("sendSignal",e)}function ro(){Jt=!0,Ht=!0}function co(e){var t;return e.every((function(e){return zt.every((function(o){return e.user===o.user||(t=e,!1)}))})),t}function lo(e){var t=co(e);console.log(t),zt.push(t),po(t)}function uo(e){e.forEach((function(e){e.user!==to.myId&&zt.push(e)})),Ht=!0,console.log("creating peer connection"),fo()}function mo(e){console.log("userList",e),Jt?lo(e):uo(e)}function fo(){console.log("connected Users =",zt);var e=Object.keys(zt);e.map((function(e){return po(e,!0),e}))}function po(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];zt[e]=new RTCPeerConnection(Wt),Qt[e]=new MediaStream,Kt[e]=!1,vo(e,t)}function vo(e,t){return ho.apply(this,arguments)}function ho(){return ho=Object(_["a"])(regeneratorRuntime.mark((function e(t,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(zt[t].addEventListener("icecandidate",(function(e){e.candidate?ao({type:"candidate",label:e.candidate.sdpMLineIndex,id:e.candidate.sdpMid,candidate:e.candidate.candidate,sendTo:t,userInfo:Pt}):console.log("End of candidates.")})),zt[t].addEventListener("iceconnectionstatechange",(function(){zt[t]&&"failed"===zt[t].iceConnectionState&&(console.log("restartICE"),zt[t].restartIce())})),zt[t].ontrack=function(e){if(console.log("비디오가 추가될 때, evnet = ",e),console.log("비디오가 추가될 때, evnet.streams = ",e.streams),e){var o=to.videos.childNodes,s=!1;if(o.forEach((function(e){e.id===t&&(s=!0)})),!s){console.log("childVideos = ",o),console.log("Remote stream added.",e.streams[0]),Qt[t]=e.streams[0];var n=document.createElement("div");n.id=t;var a,i=document.createElement("video");i.srcObject=Qt[t],i.autoplay=!0,i.playsinline=!0,i.userId=t,n.appendChild(i),console.log("state.userOnline = ",to.userOnline),to.userOnline.some((function(e){return e.sessionId===t&&(console.log(e.user.displayName),a=e.user.displayName,!0)}));var r=document.createElement("p");r.innerHTML=a,n.appendChild(r),to.videos.appendChild(n)}}},o&&zt[t].addEventListener("negotiationneeded",Object(_["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log("offering sdp"),e.next=4,zt[t].createOffer();case 4:o=e.sent,zt[t].setLocalDescription(o),ao({type:"offer",sendTo:t,userInfo:Pt,sdp:o}),console.log("offer created for a user: ",zt[t]),Jt=!0,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.error("Failed to create pc session description",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))),void 0===Vt||Kt[t]){e.next=10;break}return console.log(t,"에 track을 추가하는 중.",Vt.getTracks()),e.next=8,go();case 8:Vt.getTracks().forEach((function(e){Gt.push(zt[t].addTrack(e,Vt)),qt&&_o(Yt[0])})),Kt[t]=!0;case 10:case"end":return e.stop()}}),e)}))),ho.apply(this,arguments)}function go(e){return Co.apply(this,arguments)}function Co(){return Co=Object(_["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,navigator.mediaDevices.getUserMedia(Dt(Et.qvgaConstraints));case 4:Vt=e.sent,Zt="QVGA",e.next=12;break;case 8:return e.next=10,navigator.mediaDevices.getUserMedia(Dt(Et.startConstraints));case 10:Vt=e.sent,Zt="START";case 12:console.log("change resolution to ",Zt),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),console.log(e.t0);case 18:Gt.filter((function(e){return"video"===e.track.kind})).forEach((function(e){return e.replaceTrack(Vt.getTracks()[1])})),to.localVideo.srcObject=Vt,Vt.getTracks()[1].enabled=!Xt,Vt.getTracks()[0].enabled=!eo;case 22:case"end":return e.stop()}}),e,null,[[0,15]])}))),Co.apply(this,arguments)}function bo(e){return wo.apply(this,arguments)}function wo(){return wo=Object(_["a"])(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log("make answer to: ",t),e.next=4,zt[t].createAnswer();case 4:o=e.sent,zt[t].setLocalDescription(o),console.log("makeAnswer ",o),ao({type:"answer",sendTo:t,userInfo:Pt,sdp:o}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.trace("Failed to create session description: ".concat(e.t0.toString()));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),wo.apply(this,arguments)}function _o(e){Gt.filter((function(e){return"video"===e.track.kind})).forEach((function(t){return t.replaceTrack(e)})),qt=!0,e.addEventListener("ended",(function(){Gt.filter((function(e){return"video"===e.track.kind})).forEach((function(e){return e.replaceTrack(Vt.getTracks()[1])})),qt=!1,Lt.emit("endScreenSharing",to.classroomId,Bt)}))}function Mo(e){var t,o=to.videos.childNodes,s=Object(Tt["a"])(o);try{for(s.s();!(t=s.n()).done;){var n=t.value;if(n.id===e){to.videos.removeChild(n);break}}}catch(a){s.e(a)}finally{s.f()}go(),to.userOnline=to.userOnline.filter((function(t){return t.sessionId!==e})),Gt.filter((function(e){return"video"===e.track.kind})).forEach((function(e){return e.replaceTrack(Vt.getTracks()[1])}))}function Ao(){Vt.getTracks()[1].enabled=!!Xt,Xt=!Xt,Pe.$emit("test")}function Io(){Vt.getTracks()[0].enabled=!!eo,eo=!eo}function yo(){Vt.getTracks().forEach((function(e){"live"===e.readyState&&e.stop()})),clearInterval(Ft),ko()}function ko(){Ht=!1,Jt=!1,zt={},Qt={},Kt={},Vt=null,Xt=!0,eo=!0;while(to.videos.lastElementChild)to.videos.removeChild(to.videos.lastElementChild);to.classroomId=null,to.localVideo=null,to.videos=null,to.userOnline=[]}Lt.on("sendUserList",(function(e){if(1===e.length)return ro(),void console.log("start",e);mo(e)})),Lt.on("created",(function(e,t){console.log("방 생성 시, state.userList의 상태",t),console.log("방 생성 시, userInfo의 상태",Pt),console.log("created ".concat(e)),Jt=!0,Ht=!0})),Lt.on("joined",(function(e,t,o,s,n){console.log("".concat(t," joined ").concat(e)),console.log("userList",o.sockets),console.log("socketId === sessionId",t===Pt.sessionId),Jt?po(t):(zt=Object(ge["a"])({},o.sockets),console.log("방에 들어온 유저의 connectedUsers before delete = ",zt),delete zt[Pt.sessionId],console.log("방에 들어온 유저의 connectedUsers after delete = ",zt),Qt=Object(ge["a"])({},o.sockets),delete Qt[Pt.sessionId],Kt=Object(ge["a"])({},o.sockets),Ht=!0,console.log("creating peer connection"),fo(),s&&(go(!0),console.log(n)))})),Lt.on("sessionID",(function(e){Bt=e})),Lt.on("screenSharingMode",(function(e){go(!0),console.log(e)})),Lt.on("camSharingMode",(function(e){go(!1),console.log(e)})),Lt.on("disconnectRequest",(function(e){Mo(e),po(e)})),Lt.on("userDisconnected",(function(e,t){Mo(t),zt[t].close()})),Lt.on("noSignal",(function(e){so.leaveRoom({},e),alert("연결이 끊겼습니다. 방을 나갔다 다시 들어와주세요.")})),Lt.on("message",(function(e){if(console.log("message =",e),"offer"===e.type)console.log("got offer from =",e.userInfo.sessionId),console.log("connectedUsers의 상태는? ",zt[e.userInfo.sessionId]),console.log("connectedUsers는? ",zt),console.log("got offer connectedUsers[message.userInfo.sessionId] =",zt[e.userInfo.sessionId]),to.userOnline.includes(e.userInfo)||to.userOnline.push(e.userInfo),zt[e.userInfo.sessionId].setRemoteDescription(new RTCSessionDescription(e.sdp)),console.log("answer 만드는 중"),bo(e.userInfo.sessionId);else if("answer"===e.type&&Ht)console.log("got answer from: ",e.userInfo.sessionId),to.userOnline.includes(e.userInfo)||to.userOnline.push(e.userInfo),zt[e.userInfo.sessionId].setRemoteDescription(new RTCSessionDescription(e.sdp));else if("candidate"===e.type&&Ht){console.log("got candidate from: ",e.userInfo.sessionId);var t=new RTCIceCandidate({sdpMLineIndex:e.label,candidate:e.candidate});zt[e.userInfo.sessionId].addIceCandidate(t)}}));var xo={namespaced:!0,state:to,getters:oo,mutations:so,actions:no},Ro=(o("b0c0"),o("bdb9")),So={screenNames:null,screenInfo:null,canvas:null,ctx:null,screenVideos:null,captureScreensBtn:null},Oo={},$o={variableSetter:function(e,t){e.screenNames=t.screenNames,e.screenInfo=t.screenInfo,e.screenVideos=t.screenVideos,e.captureScreensBtn=t.captureScreens,e.canvas=t.canvas}},To={VariableSetter:function(e,t){var o=e.commit;o("variableSetter",t)},CaptureScreens:function(){Eo()}};function Eo(){Ro["desktopCapturer"].getSources({types:["window","screen"],thumbnailSize:{width:250,height:140}}).then(function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.forEach((function(e){var t=document.createElement("div"),o=document.createElement("canvas"),s=document.createElement("IMG"),n=document.createElement("p"),a=document.createTextNode(e.name),i=o.getContext("2d");o.width=e.thumbnail.getSize().width,s.onload=function(){return i.drawImage(s,0,0)},s.src=e.thumbnail.toDataURL(),t.detail=e,n.appendChild(a),t.appendChild(o),t.appendChild(n),t.classList.add("screen"),So.canvas.appendChild(t)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var jo={namespaced:!0,state:So,getters:Oo,mutations:$o,actions:To};s["a"].use(Ce["a"]);var Uo=new Ce["a"].Store({modules:{room:$t,webRTC:xo,electron:jo}});s["a"].config.productionTip=!1,s["a"].prototype.$http=a.a,s["a"].prototype.$setJWT=function(e){s["a"].prototype.$jwt=e},s["a"].prototype.$setUserId=function(e){s["a"].prototype.$userId=e},new s["a"]({router:kt,store:Uo,render:function(e){return e(u)}}).$mount("#app")},"5c0b":function(e,t,o){"use strict";var s=o("9c0c"),n=o.n(s);n.a},6158:function(e,t,o){"use strict";var s=o("ec8a"),n=o.n(s);n.a},"6bc2":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAARxJREFUeNrs2uENgjAQBeCWCdxAFiBxBNmADSRhATcgTIAOwA5sICOQMIBsoCN4pyWCCn9sY66+l5REm2A+8Kq9oJRH0U7P3lUpHXfmVU/jqKKslYfpqpKO+5d3rzRiV6DAEST8AOGsaOSurl/g6LzhwlwiDfOTAAMMMMAAAwwwwAADDDDASI0ebXVT9Ww+fBveHm8W5huLBu4rFNxX0AZSzuzZpeTeKNGm+XD24FtWc82EnpRM4tMC0A81czFFKznFcGdiU0RSw6vjYbw0851JLNXQmka6dBUtQlpaluvp74zNdNWWjqfZ+Shz8rn4OwMMMMAAAwwwwAADDDDAAPOnmF4ahh/BmmuQ1LIwUfZ4ruwd1Ci7zYxJbgIMALEtMB51EsW3AAAAAElFTkSuQmCC"},7257:function(e,t,o){"use strict";var s=o("0bea"),n=o.n(s);n.a},"806c":function(e,t,o){"use strict";var s=o("d3c8"),n=o.n(s);n.a},"878b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAZCAYAAAD9jjQ4AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFlJREFUeNpiYCAE/v//bwDE84F4PxD3A7EAssT7/6jgPFgBVAc2UMAE1KyAwzYBkOQFHJIPQMYKQO1AsRMkywh1FMh1CSCjQDoYGRkXMFAORgNhKAUCQIABAAMuJXSHcNtUAAAAAElFTkSuQmCC"},"8de1":function(e,t,o){"use strict";var s=o("d406"),n=o.n(s);n.a},"94ac":function(e,t,o){"use strict";var s=o("0b52"),n=o.n(s);n.a},"96a8":function(e,t,o){e.exports=o.p+"img/blackboard.82732d58.png"},"9c0c":function(e,t,o){},a373:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAbRJREFUeNrM2IFtgzAQAEA/EzBCOkAkRigbNBtQZYJOEnUAlHQC2KDdIEgM0IzACLVru3UIhPf7H8WSUUTgfX5hY6PUgxf4+9XXuT4edK3cmYuub2q7b0UFfV3oY6Prxp350vVVt2vaV1lw6WeAU+6GRgeoBHEm9jnAmfL8a7EJc8C+ftHHYibMUQRpYx5n/t34ZPkMFgvheJH3cb7kIbBDhOVB4nCmDP9AOxDkkXG4djxISlFkHK70oxhGQXI3mgtEIDMVnIRw3e08KIVMwE0DOZGJuHkgB5IBdx+YgmTCLQMpSD/SGXA4YDxSceHwQF4kGhcH5EFG4eKBachoHA1IQ5Jw43cxvmz3psGPiDveKbiUDGLnOdq7O/EZpODISFgRR0LCyrhoJDDjhnA/wYEEZlwZbGFZkMCK81OJ3YyzIEFqJcyFBKmVMBcSxHBMSBDFMSBBHJeIhODjUSO5KqEiM+49xMIqqHNz5YC4+mAzaHt1FsfRMllmq2QuIZP+GfxW11855XD4TF50u08+g7uJ3sjirjN5mWh7N55mTC8q1xtzwckt7eXLbdut//z28OVHgAEADBMPLDF0WjUAAAAASUVORK5CYII="},a7cf:function(e,t,o){},aac9:function(e,t,o){},ab89:function(e,t,o){"use strict";var s=o("4813"),n=o.n(s);n.a},b79a:function(e,t,o){"use strict";var s=o("322e"),n=o.n(s);n.a},bb36:function(e,t,o){"use strict";var s=o("3864"),n=o.n(s);n.a},cf42:function(e,t,o){e.exports=o.p+"img/test.bca53086.png"},d3c8:function(e,t,o){},d406:function(e,t,o){},df4f:function(e,t,o){e.exports=o.p+"img/mic-off.2495e94e.svg"},ec71:function(e,t,o){},ec8a:function(e,t,o){},ecd0:function(e,t,o){"use strict";var s=o("ee1e"),n=o.n(s);n.a},ee1e:function(e,t,o){},f86f:function(e,t,o){}});
//# sourceMappingURL=app.9012127e.js.map